{% extends "blog/base.html" %}
{% load static %}

{% block desc %} Découvrez mon portfolio : logiciels, applications web, sites internet, logos, branding et flyers réalisés avec expertise à Niamey. {% endblock desc %}

{% block titre %}My PortFolio{% endblock titre %}

{% block content %}

<!-- Titre -->
  <div class="text-center">
    <h1 id="titre-portfolio" class="text-5xl font-extrabold text-[#FFD700] py-8 px-4 mb-4 text-left"></h1>
    <p class="text-white/80 px-4 text-lg max-w-3xl mx-auto">
      Bienvenue dans mon univers créatif : un mélange de développement (logiciels, Applications Web et Site Web), de design, et de passion.
    </p>
  </div><br>

  <!-- Filtres -->
  <div id="filtre" class="flex justify-center flex-wrap gap-4">
    <button class="filter-btn active px-5 py-2 rounded-full text-sm bg-[#FFD700] text-[#282828] hover:bg-[#ffdf00] transition" data-category="all">
      Tous
    </button>
    <button class="filter-btn px-5 py-2 rounded-full text-sm border border-[#FFD700]/40 text-white hover:bg-[#FFD700]/10 transition" data-category="design">
      Design
    </button>
    <button class="filter-btn px-5 py-2 rounded-full text-sm border border-[#FFD700]/40 text-white hover:bg-[#FFD700]/10 transition" data-category="dev">
      Développement
    </button>
  </div><br><br>

  <!-- Grille responsive Masonry -->
  <div class="px-6 columns-2 sm:columns-2 md:columns-3 lg:columns-4 gap-4 [column-fill:_balance]">
    {% for p in mesProjets %}
    <a href="{{ p.slug }}/plus"
       data-category="{{p.type_pro}}"
       class="mb-4 break-inside-avoid block group rounded-2xl overflow-hidden shadow-lg bg-[#1f1f1f] border border-[#FFD700]/20 hover:bg-[#2e2e2e] transition project-card project-animate">

      <div class="relative">
        <picture>
          <source srcset="{{ p.photo_webp }}" type="image/webp">
          <!-- Fallback JPG -->
          <img src="{{ p.photo.url }}" alt="{{ p.libellé }}"
          loading="lazy"
          class="w-full object-cover rounded-t-2xl transition-transform duration-500 group-hover:scale-105">
        </picture>

        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition duration-300 flex flex-col justify-center items-center px-4 text-center">
          <h3 class="text-lg font-bold text-[#FFD700] mb-1">{{ p.libellé }}</h3>
          <p class="text-sm text-white">{{ p.pour }}</p>
        </div>
      </div>
    </a>
    {% endfor %}
  </div><br><br>

  <section class="py-16 bg-[#0a1a2e]/50 text-white">
    <div class="max-w-3xl mx-auto px-6 text-center">
      <h2 class="text-3xl font-bold text-[#FFD700] mb-6">
        Partage ton témoignage
      </h2>
  
      <!-- Bouton -->
      <button id="toggleFormBtn"
        class="px-6 py-3 bg-[#FFD700] text-[#010017] font-semibold rounded-xl shadow-lg hover:bg-yellow-400 transition duration-300">
        Raconte ton expérience
      </button>
  
      <!-- Formulaire masqué -->
      <div id="testimonialFormWrapper"
        class="max-h-0 overflow-hidden px-6 transition-all duration-700 ease-in-out">
        
        <form id="temoignage-form" method="post" action="{% url 'ajouter_temoignage' %}"
          class="bg-[#1f1f1f] mt-6 p-6 rounded-2xl shadow-xl text-left space-y-4 border border-[#FFD700]/30">
          {% csrf_token %}
          
          <div>
            <label for="prenom" class="block text-sm text-gray-300 mb-1">Prénom</label>
            <input type="text" name="prenom" id="prenom" required
              class="w-full px-4 py-2 rounded-lg bg-[#010017] border border-gray-600 text-white focus:ring-2 focus:ring-[#FFD700] focus:outline-none transition"/>
          </div>
          
          <div>
            <label for="profession" class="block text-sm text-gray-300 mb-1">Profession</label>
            <input type="text" name="profession" id="profession" required
              class="w-full px-4 py-2 rounded-lg bg-[#010017] border border-gray-600 text-white focus:ring-2 focus:ring-[#FFD700] focus:outline-none transition"/>
          </div>
  
          <div>
            <label for="commentaire" class="block text-sm text-gray-300 mb-1">Commentaire</label>
            <textarea name="commentaire" id="commentaire" rows="4" required
              class="w-full px-4 py-2 rounded-lg bg-[#010017] border border-gray-600 text-white focus:ring-2 focus:ring-[#FFD700] focus:outline-none transition"></textarea>
          </div>
  
          <button type="submit"
            class="w-full py-3 bg-[#FFD700] text-[#010017] font-semibold rounded-lg shadow-md hover:bg-yellow-400 transition duration-300">
            Envoyer mon témoignage
          </button>
        </form>
      </div>
    </div>
  </section>
  
{% endblock content %}
